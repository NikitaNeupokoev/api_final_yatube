# Проект «API для Yatube»

## Описание

Этот проект представляет собой API для социальной сети Yatube. Он предоставляет пользователям возможность создавать и комментировать посты, подписываться на других пользователей и управлять своими подписками.

## Установка

1.  **Клонирование репозитория:**

    git clone https://github.com/NikitaNeupokoev/api_final_yatube.git
    
    cd api_final_yatube

2.  **Создание и активация виртуального окружения:**
    Создание для Linux/macOS
    python3 -m venv venv
    # Создание для Windows
    python -m venv venv

    # Активация для Linux/macOS
    source venv/bin/activate
    # Активация для Windows
    venv\Scripts\activate

3.  **Обновление pip (рекомендуется):**

    python -m pip install --upgrade pip

    *Обновление pip гарантирует использование последней версии пакетного менеджера, что может предотвратить проблемы при установке зависимостей.*

4.  **Установка зависимостей:**

    pip install -r requirements.txt

5.  **Применение миграций:**
    
    переходим в папку с manage.py
    cd yatube_api

    python manage.py migrate

6.  **Запуск сервера:**

    python manage.py runserver

    Сервер будет запущен по адресу `http://127.0.0.1:8000/`.

## Использование API

### Аутентификация

Для доступа к большинству эндпоинтов API требуется аутентификация с использованием JWT.

1.  **Получение JWT-токена:**

    Отправьте `POST` запрос на эндпоинт `/api/v1/auth/jwt/create/` с вашими учетными данными (username и password) в формате JSON.

    **Пример запроса:**

    {
        "username": "your_username",
        "password": "your_password"
    }

    **Пример ответа:**

    {
        "access": "your_access_token",
        "refresh": "your_refresh_token"
    }

2.  **Обновление JWT-токена:**

    Отправьте `POST` запрос на эндпоинт `/api/v1/auth/jwt/refresh/` с вашим `refresh` токеном.

    **Пример запроса:**

    {
        "refresh": "your_refresh_token"
    }

    **Пример ответа:**

    {
        "access": "new_access_token"
    }

3.  **Авторизация в запросах:**

    Передавайте `access` токен в заголовке `Authorization` в формате `Bearer <your_access_token>` для каждого запроса к API, требующего аутентификации.

    **Пример заголовка:**

    Authorization: Bearer <your_access_token>

### Примеры запросов API

Все запросы к API должны начинаться с префикса `/api/v1/`.

#### Posts

*   **Получение списка постов:**

    `GET /api/v1/posts/`

    *   Требуется аутентификация: Нет (чтение доступно всем).

*   **Создание поста:**

    `POST /api/v1/posts/`

    *   Требуется аутентификация: Да.

    **Пример запроса:**

    {
        "text": "Текст вашего поста",
        "group": 1,      // (опционально) ID группы
        "image": "url_изображения" //(опционально) URL изображения
    }

*   **Получение конкретного поста:**

    `GET /api/v1/posts/{post_id}/`

    * Требуется аутентификация: Нет (чтение доступно всем).

*   **Редактирование поста:**

    `PUT /api/v1/posts/{post_id}/`

    `PATCH /api/v1/posts/{post_id}/`

    *   Требуется аутентификация: Да, только автор поста.

*   **Удаление поста:**

    `DELETE /api/v1/posts/{post_id}/`

    *   Требуется аутентификация: Да, только автор поста.

#### Comments

*   **Получение комментариев к посту:**

    `GET /api/v1/posts/{post_id}/comments/`

    *   Требуется аутентификация: Нет (чтение доступно всем).

*   **Создание комментария к посту:**

    `POST /api/v1/posts/{post_id}/comments/`

    *   Требуется аутентификация: Да.

    **Пример запроса:**

    {
        "text": "Текст комментария"
    }

#### Follow

*   **Получение списка подписок:**

    `GET /api/v1/follow/`

    *   Требуется аутентификация: Да.
    *   Параметр `search`:  Позволяет искать подписки по username пользователя, на которого подписаны.

        **Пример:** `GET /api/v1/follow/?search=username`

*   **Подписка на пользователя:**

    `POST /api/v1/follow/`

    *   Требуется аутентификация: Да.

    **Пример запроса:**

    {
        "following": <id_пользователя>
    }

#### Groups

*   **Получение списка групп:**

    `GET /api/v1/groups/`

    *   Требуется аутентификация: Нет (чтение доступно всем).

*   **Получение конкретной группы:**

    `GET /api/v1/groups/{group_id}/`

    *   Требуется аутентификация: Нет (чтение доступно всем).
